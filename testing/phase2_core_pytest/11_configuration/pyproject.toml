# ============================================================
# pytest 설정 예제 - 예지보전 시스템 프로젝트
# ============================================================
# 이 파일은 pytest 설정 방법을 보여주는 예제입니다.
# 실제 프로젝트에서는 프로젝트 루트에 위치합니다.

[tool.pytest.ini_options]

# --- 테스트 검색 경로 ---
# pytest가 테스트 파일을 찾을 디렉토리를 지정한다.
# 이 디렉토리는 설정 파일 기준 상대 경로이다.
testpaths = ["."]

# --- 테스트 파일/함수/클래스 패턴 ---
# 기본값을 명시적으로 설정 (필요시 변경 가능)
python_files = ["test_*.py"]
python_functions = ["test_*"]
python_classes = ["Test*"]

# --- 기본 명령줄 옵션 ---
# 매 테스트 실행 시 자동 적용되는 옵션
addopts = [
    "-v",                # 상세 출력: 각 테스트의 이름과 결과를 표시
    "--tb=short",        # 짧은 트레이스백: 실패 시 핵심 정보만 표시
    "-ra",               # 요약: 실패/건너뜀/에러 테스트를 마지막에 요약
]

# --- 커스텀 마커 등록 ---
# --strict-markers와 함께 사용하면 미등록 마커 사용 시 에러 발생
markers = [
    "slow: 실행 시간이 오래 걸리는 테스트 (전체 진단, 대량 데이터 처리 등)",
    "integration: 외부 시스템 연동이 필요한 통합 테스트 (DB, API, 클라우드 등)",
    "sensor: 센서 관련 테스트 (온도, 진동, 압력 등)",
    "smoke: 핵심 기능만 빠르게 확인하는 스모크 테스트",
    "config: 설정 관련 테스트",
]

# --- 경고 필터 ---
# 테스트 중 발생하는 경고를 제어한다.
filterwarnings = [
    "ignore::DeprecationWarning",          # 사용 중단 경고 무시
    "ignore::PendingDeprecationWarning",   # 사용 중단 예정 경고 무시
]

# --- 최소 pytest 버전 ---
minversion = "7.0"
